package security.br.ufal.ic.mozilla;

public class CreateLinkPatch {

	public static void main(String[] args) {

		ProjectDataControllerMozilla dao = new ProjectDataControllerMozilla();
		for (Vulnerabilities vulnerability : dao.getListVulnerabilitiesMozilla()) {
			String bugID = vulnerability.getBUGZILLA_URL().split("id=")[1].replace(" ", "");
			for (PatchMozilla patch : dao.getListPatchMozilla()) {
				String patcherLinkID = patch.getP_URL().split("id=")[1].replace("&action=diff", "");
				if (patch.getV_ID().equals(vulnerability.getV_ID())) {
					patch.setRAW_UNIFIED(
							"https://bug" + bugID + ".bmoattachments.org/attachment.cgi?id=" + patcherLinkID);
					patch.setBUG_ID(bugID);
					dao.updatePatchMozilla(patch);
				}

			}
		}
	}

}
