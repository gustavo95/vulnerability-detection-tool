package security.br.ufal.ic.xen;

import java.util.ArrayList;
import java.util.List;

public class ChangeTableXen {
	static int NCEC;
	static int NCMC;
	static int NFCEC;
	static int NFCMC;
	static int NMEC;
	static int NMMC;
	static int NVEC;
	static int NVMC;

	public static void main(String[] args) {

		ProjectXenDAOCOntroller daoxen = new ProjectXenDAOCOntroller();
		XenDataCodeChurn xenDataCodeChurn;
		List<XenClassify> list =  daoxen.getListXenClassify();

		for (int i = 0; i < 10; i++) {
//			NCEC=list.get(i).getNConditionalExtraneousChanges();
//			NCMC=list.get(i).getNConditionalMissingChanges();
//			NFCEC=list.get(i).getNFunctionCallExtraneousChanges();
//			NFCMC=list.get(i).getNFunctionCallMissingChanges();
//			NMEC=list.get(i).getNMethodExtraneousChanges();
//			NMMC=list.get(i).getNMethodMissingChanges();
//			NVEC=list.get(i).getNVariableExtraneousChanges();
//			NVMC=list.get(i).getNVariableMissingChanges();
			for (int k = 1; k<10; k++) {
				if (list.get(i).getFunction().equals(list.get(k).getFunction())
						&& list.get(i).getVulnerabilityID().equals(list.get(k).getVulnerabilityID())
								&& !(list.get(i).getCommit().equals(list.get(k).getCommit()))&&(list.get(i).isVulnerability()==list.get(k).isVulnerability())) {
//					System.out.println(list.get(k).getNConditionalExtraneousChanges());
					NCEC+=list.get(k).getNConditionalExtraneousChanges();
					NCMC+=list.get(k).getNConditionalMissingChanges();
					NFCEC+=list.get(k).getNFunctionCallExtraneousChanges();
					NFCMC+=list.get(k).getNFunctionCallMissingChanges();
					NMEC+=list.get(k).getNMethodExtraneousChanges();
					NMEC+=list.get(k).getNMethodMissingChanges();
					NVEC+=list.get(k).getNVariableExtraneousChanges();
					NVMC+=list.get(k).getNVariableMissingChanges();
				System.out.println(list.get(k).getFunction());
				System.out.println(list.get(k).getNConditionalExtraneousChanges());
					
				}

			}
			System.out.println(NCEC);
	

			xenDataCodeChurn = new XenDataCodeChurn();
			xenDataCodeChurn.setCommit(list.get(i).getCommit());
			xenDataCodeChurn.setFile(list.get(i).getFile());
			xenDataCodeChurn.setFunction(list.get(i).getFunction());
			xenDataCodeChurn.setVulnerabilityID(list.get(i).getVulnerabilityID());
			xenDataCodeChurn.setPatch(list.get(i).isVulnerability());
			xenDataCodeChurn.setNConditionalExtraneousChanges(NCEC);
			xenDataCodeChurn.setNConditionalMissingChanges(NCMC);
			xenDataCodeChurn.setNFunctionCallExtraneousChanges(NFCEC);
			xenDataCodeChurn.setNFunctionCallMissingChanges(NFCMC);
			xenDataCodeChurn.setNMethodExtraneousChanges(NMEC);
			xenDataCodeChurn.setNMethodMissingChanges(NMMC);
			xenDataCodeChurn.setNVariableExtraneousChanges(NVEC);
			xenDataCodeChurn.setNVariableMissingChanges(NVMC);
			//daoxen.addInstace(xenDataCodeChurn);
//			NCEC;
//			NCMC;
//			NFCEC;
//			NFCMC;
//			 NMEC;
//			NMMC;
//			 NVEC;
//			 NVMC;
		



		}

	}

}
